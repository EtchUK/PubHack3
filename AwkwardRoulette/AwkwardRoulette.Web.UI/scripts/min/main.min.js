!function(e){var t=["is it wrong that I find squirrels attractive? #awkward","These piles sting #awkward","Someone help me please? I met this guy last night and he came back to mine, he liked the dominatrix sorta stuff. He handcuffed me to my bed and put things in places that I don't even wanna talk about, but lets just say it hurts to poo now... anyway he ended up leaving, and left me handcuffed and I can't reach the keys. Someone please come and help!? #awkward","How do you tell your best friend that you are in love with him? #awkward","Farting in public and blaming it on the old people around me is the highlight of my day. #awkward","If anyone has a bottle of breast milk I can have, that would be great. The stuff from cows just isn't as good. #awkward"],n=[{text:"",img:"img/baby.jpg"},{text:"Thought I had outgrown pimples",img:"img/boil.jpg"},{text:"Been ages since I had boils on my bum",img:"img/bum_boil.jpg"},{text:"Need to get that pedicure booked in",img:"img/feet.jpg"},{text:"Last night...",img:"img/lastnight.jpg"}];e.ajaxSetup({cache:!0}),e.getScript("//connect.facebook.net/en_UK/all.js",function(){function o(){var t=e.Deferred();return FB.getLoginStatus(function(e){"connected"===e.status?t.resolve():FB.login(function(){t.resolve()},{scope:"publish_actions"})}),t}function a(){var t=e.Deferred();return u?t.resolve(u):o().then(function(){FB.api("/me","GET",{},function(e){e&&!e.error?(u=e,t.resolve(e)):e.error&&t.reject(e.error)})}),t}function i(t,n){var a=e.Deferred();return o().then(function(){FB.api("/"+t+"/feed","POST",n,function(e){e&&!e.error?a.resolve(e):e.error&&a.reject(e.error)})}),a}function r(t,n){var a=e.Deferred();return o().then(function(){FB.api("/me/photos","POST",{url:t,message:n},function(e){e&&!e.error?a.resolve(e):e.error&&a.reject(e.error)})}),a}function l(t,n,o){return e.post("/api/twilio",{name:t,target:n,number:o})}function s(){setTimeout(function(){if(e(".spinner-item.active").length&&e(".spinner-item.active").next(".spinner-item").length?e(".spinner-item.active").removeClass("active").next().addClass("active"):(e(".spinner-item.active").removeClass("active"),e(".spinner-item").first().addClass("active")),g-=1,g>0)m.play(),m.currentTime=0,s();else{d.play();var o=e(".spinner-item.active").data("punishment");if("phone"===o)a().then(function(e){var t=localStorage.getItem("lovedOneName"),n=localStorage.getItem("lovedOnePhone");l(e.first_name,t,n).then(function(){c("We've prank called your loved one.")},function(e){c("There was an error calling your loved one."),console.log(e)})});else if("written"===o){var u=t[Math.floor(Math.random()*t.length)];i("me",{message:u}).then(function(){a().then(function(e){c("We've <a href='"+e.link+"' target='_blank'>written on your Facebook wall</a>")})},function(e){c("There was an error writing on your Facebook wall"),console.log(e)})}else if("photo"===o){var u=n[Math.floor(Math.random()*n.length)];r(window.location.protocol+"//"+window.location.hostname+"/"+u.img,u.text).then(function(){a().then(function(e){c("We've <a href='"+e.link+"' target='_blank'>posted a photo on your Facebook wall</a>")})},function(e){c("There was an error posting to your Facebook wall"),console.log(e)})}else"none"===o&&c("You got lucky this time! No punishment.");e(".spinner-item.active").addClass("chosen")}},p),p+=25}function c(t){f=!1,e(".start-spinner").text("PLAY"),e(".result").html(t)}FB.init({appId:"729058753814551"});var u;e(".js-login").on("click",function(){return o().then(function(){window.location.href="entry.html"},function(){alert("You need to authorize the app in order to play")}),!1}),e(".js-play").on("click",function(){return""===e.trim(e("#loved-one-name").val())||""===e.trim(e("#loved-one-phone").val())?(alert("You did not fill out one of the fields!"),!1):(localStorage.setItem("lovedOneName",e("#loved-one-name").val()),localStorage.setItem("lovedOnePhone",e("#loved-one-phone").val()),window.location.href="game.html",!1)});var h=e(".js-your-name");h.length&&a().then(function(e){h.text(e.first_name)});var m=new Audio("sounds/click.wav"),d=new Audio("sounds/chime.wav"),f=!1,g=0,p=0;e(".start-spinner").click(function(){return f||(f=!0,e(".result").text(""),e(".spinner-item").removeClass("chosen").removeClass("active"),p=0,e(this).text("Wait..."),g=Math.floor(20*Math.random()+10),s()),!1})})}(jQuery);