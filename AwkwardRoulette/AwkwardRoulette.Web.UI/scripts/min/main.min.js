!function(e){e.ajaxSetup({cache:!0}),e.getScript("//connect.facebook.net/en_UK/all.js",function(){function n(){var n=e.Deferred();return FB.getLoginStatus(function(e){"connected"===e.status?n.resolve():FB.login(function(){n.resolve()},{scope:"publish_actions"})}),n}function t(){var n=e.Deferred();return FB.api("/me","GET",{},function(e){e&&!e.error?n.resolve(e):e.error&&n.reject(e.error)}),n}function r(n,t){var r=e.Deferred();return FB.api("/"+n+"/feed","POST",{message:t},function(e){e&&!e.error?r.resolve(e):e.error&&r.reject(e.error)}),r}function i(){setTimeout(function(){if(e(".spinner-item.active").length&&e(".spinner-item.active").next(".spinner-item").length?e(".spinner-item.active").removeClass("active").next().addClass("active"):(e(".spinner-item.active").removeClass("active"),e(".spinner-item").first().addClass("active")),c-=1,c>0)i();else{var t=e(".spinner-item.active").data("punishment");"phone"===t?o():"written"===t?n().then(function(){r("me","this is the message").then(function(){o()})}):"photo"===t?o():"none"===t&&o(),e(".spinner-item.active").addClass("chosen")}},l),l+=25}function o(){s=!1,e(".start-spinner").text("PLAY");var n=e(".chosen").data("desc");e(".result").text(n)}FB.init({appId:"729058967147863"}),e(".js-login").on("click",function(){return n().then(function(){window.location.href="entry.html"}),!1}),e(".js-play").on("click",function(){return localStorage.setItem("lovedOneName",e("#loved-one-name").val()),localStorage.setItem("lovedOnePhone",e("#loved-one-phone").val()),window.location.href="game.html",!1});var a=e(".js-your-name");a.length&&n().then(function(){t().then(function(e){a.text(e.first_name)})});var s=!1,c=0,l=0;e(".start-spinner").click(function(){return s||(s=!0,e(".result").text(""),e(".spinner-item").removeClass("chosen").removeClass("active"),l=0,e(this).text("Wait..."),c=Math.floor(20*Math.random()+10),i()),!1})})}(jQuery);